---
description: >
  The credentials data source is used to load credentials contained within a
  password protected Keepass 2 file.
page_title: Credentials - Data Sources
nav_title: Credentials
---

# Credentials

Type: `keepass-credentials`

The credentials data source is used to load credentials contained within a
password protected Keepass 2 file.

### Required

- `keepass_file` (string) - Path to the keepass 2 database.
- `keepass_password` (string) - Master password for the keepass 2 database.

### OutPut

- `map` (map[string]string) - A map of credentials. 

The following map keys are constructed for each entry within the keepass
database:

* `<path-to-entry>/<title>-username`
* `<path-to-entry>/<title>-password`
* `<uuid>-username`
* `<uuid>-password`
* `<uuid>-title`

The `path-to-entry` is the names of the group (folder) names combined with the
`/` symbol.

The plugin will warn of ambiguous paths present in the keepass database in the
packer log. Note that only the first instance of any path will be accessible.

To find the `uuid` of each credential entry, in Keepass go to **View** ->
**Configure Columns...** and check the **UUID** column to be displayed.

![Keepass displaying UUID](/docs/datasources/keepass-uuid.png)

The example Keepass 2 database (`example/example.kdbx`) with sample entries will
thus generate the following keys and values:

```
/example/Sample Entry-username: User Name
/example/Sample Entry-password: Password
/example/Sample Entry #2-username: Michael321
/example/Sample Entry #2-password: 12345
F1ABA233DAE73E419937F475C593F31C-username: Michael321
F1ABA233DAE73E419937F475C593F31C-password: 12345
F1ABA233DAE73E419937F475C593F31C-title: Sample Entry #2
```

Building `example/data-var.pkr.hcl` will generate the following output in
`credentials.txt`:

```
Michael321:12345
```

### Example Usage

```hcl
packer {
  required_plugins {
    keepass = {
      version = ">= 0.2.0"
      source  = "github.com/chunqi/keepass"
    }
  }
}

variable "keepass_password" {
  type = string
  sensitive = true
}

data "keepass-credentials" "example" {
  keepass_file = "example/example.kdbx"
  keepass_password = "${var.keepass_password}"
}

source "file" "example" {
  content = format("%s:%s", data.keepass-credentials.example.map["F1ABA233DAE73E419937F475C593F31C-username"], data.keepass-credentials.example.map["/example/Sample Entry #2-password"])
  target = "credentials.txt"
}

build {
  sources = ["sources.file.example"]
}
```
